name: Deploy Nebari website

on:
  workflow_dispatch:
  schedule:
	# * 10:37 every day ‚Äì 37 just to not trigger exactly at 10:30 like many other;
    #  10:37 UTC is 6:30am EST is a bit before the beginning of the day in the US,
    - cron: "37 10 * * *"  # 10:37 UTC daily

jobs:
  build_site:
    runs-on: ubuntu-latest
    environment: docs-prod
    steps:
      - name: Check out repository üõéÔ∏è
        uses: actions/checkout@v4

      - name: Trigger Netlify build üöÄ
        env:
          WEBHOOK: ${{ secrets.NETLIFY_WEBHOOK }}
        uses: wei/curl@v1.1.1
        with:
          # Use Actions interpolation (not ${WEBHOOK}). GitHub will mask the secret in logs.
          # -f: fail on HTTP errors, -sS: silent but show errors, -o /dev/null: drop body
          args: -fsS -X POST ${{ env.WEBHOOK }} -o /dev/null
